<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">
<title>HSDB从入门到实战 - Mr·Zh</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">



    <meta name="description" content="HSDB（Hotspot Debugger)，是一款内置于 SA 中的 GUI 调试工具，可用于调试 JVM 运行时数据，从而进行故障排除 启动HSDB检测不同 JDK 版本需要使用不同的 HSDB 版本，否则容易出现无法扫描到对象等莫名其妙的问题  Mac：JDK7 和 JDK8 均可以采用以下的方式 1$ sudo java -cp ,:/Library/Java/JavaVirtualMac">
<meta name="keywords" content="JVM,故障排查">
<meta property="og:type" content="article">
<meta property="og:title" content="HSDB从入门到实战">
<meta property="og:url" content="http://yoursite.com/2019/12/06/HSDB从入门到实战/index.html">
<meta property="og:site_name" content="Mr·Zh">
<meta property="og:description" content="HSDB（Hotspot Debugger)，是一款内置于 SA 中的 GUI 调试工具，可用于调试 JVM 运行时数据，从而进行故障排除 启动HSDB检测不同 JDK 版本需要使用不同的 HSDB 版本，否则容易出现无法扫描到对象等莫名其妙的问题  Mac：JDK7 和 JDK8 均可以采用以下的方式 1$ sudo java -cp ,:/Library/Java/JavaVirtualMac">
<meta property="og:locale" content="default">
<meta property="og:image" content="https://zzcoder.oss-cn-hangzhou.aliyuncs.com/jvm/HSDB-01.png">
<meta property="og:image" content="https://zzcoder.oss-cn-hangzhou.aliyuncs.com/jvm/HSDB-02.png">
<meta property="og:image" content="https://zzcoder.oss-cn-hangzhou.aliyuncs.com/jvm/HSBD-03.png">
<meta property="og:image" content="https://zzcoder.oss-cn-hangzhou.aliyuncs.com/jvm/HSDB-04.png">
<meta property="og:image" content="https://zzcoder.oss-cn-hangzhou.aliyuncs.com/jvm/HSDB-05.png">
<meta property="og:image" content="https://zzcoder.oss-cn-hangzhou.aliyuncs.com/jvm/HSDB-06.png">
<meta property="og:image" content="https://zzcoder.oss-cn-hangzhou.aliyuncs.com/jvm/HSDB-07.png">
<meta property="og:image" content="https://zzcoder.oss-cn-hangzhou.aliyuncs.com/jvm/HSDB-08.png">
<meta property="og:image" content="https://zzcoder.oss-cn-hangzhou.aliyuncs.com/jvm/HSDB-09.png">
<meta property="og:image" content="https://zzcoder.oss-cn-hangzhou.aliyuncs.com/jvm/HSDB-10.png">
<meta property="og:image" content="https://zzcoder.oss-cn-hangzhou.aliyuncs.com/jvm/HSDB-11.png">
<meta property="og:image" content="https://zzcoder.oss-cn-hangzhou.aliyuncs.com/jvm/HSDB-12.png">
<meta property="og:image" content="https://zzcoder.oss-cn-hangzhou.aliyuncs.com/jvm/HSDB-13.png">
<meta property="og:image" content="https://zzcoder.oss-cn-hangzhou.aliyuncs.com/jvm/HSDB-14.png">
<meta property="og:image" content="https://zzcoder.oss-cn-hangzhou.aliyuncs.com/jvm/HSDB-15.png">
<meta property="og:image" content="https://zzcoder.oss-cn-hangzhou.aliyuncs.com/jvm/HSDB-16.png">
<meta property="og:image" content="https://zzcoder.oss-cn-hangzhou.aliyuncs.com/jvm/HSDB-17.png">
<meta property="og:image" content="https://zzcoder.oss-cn-hangzhou.aliyuncs.com/jvm/HSDB-18.png">
<meta property="og:image" content="https://zzcoder.oss-cn-hangzhou.aliyuncs.com/jvm/HSDB-19.png">
<meta property="og:image" content="https://zzcoder.oss-cn-hangzhou.aliyuncs.com/jvm/HSDB-20.png">
<meta property="og:image" content="https://zzcoder.oss-cn-hangzhou.aliyuncs.com/jvm/HSDB-21.png">
<meta property="og:image" content="https://zzcoder.oss-cn-hangzhou.aliyuncs.com/jvm/HSDB-22.png">
<meta property="og:image" content="https://zzcoder.oss-cn-hangzhou.aliyuncs.com/jvm/HSDB-23.png">
<meta property="og:image" content="https://zzcoder.oss-cn-hangzhou.aliyuncs.com/jvm/HSDB-24.png">
<meta property="og:updated_time" content="2020-02-06T05:37:44.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="HSDB从入门到实战">
<meta name="twitter:description" content="HSDB（Hotspot Debugger)，是一款内置于 SA 中的 GUI 调试工具，可用于调试 JVM 运行时数据，从而进行故障排除 启动HSDB检测不同 JDK 版本需要使用不同的 HSDB 版本，否则容易出现无法扫描到对象等莫名其妙的问题  Mac：JDK7 和 JDK8 均可以采用以下的方式 1$ sudo java -cp ,:/Library/Java/JavaVirtualMac">
<meta name="twitter:image" content="https://zzcoder.oss-cn-hangzhou.aliyuncs.com/jvm/HSDB-01.png">





<link rel="icon" href="/images/logo.png">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css">


    
    
    
    <style>body>.footer,body>.navbar,body>.section{opacity:0}</style>
    

    
    
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">
    

    
    

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css">


    
    
    
    

<link rel="stylesheet" href="/css/back-to-top.css">


    
    

    
    
    
    

    
    
<link rel="stylesheet" href="/css/progressbar.css">
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>

    
    
    

    


<link rel="stylesheet" href="/css/style.css">
</head>
<body class="is-2-column">
    <nav class="navbar navbar-main">
    <div class="container">
        <div class="navbar-brand is-flex-center">
            <a class="navbar-item navbar-logo" href="/">
            
                <img src="/images/logo.png" alt="HSDB从入门到实战" height="28">
            
            </a>
        </div>
        <div class="navbar-menu">
            
            <div class="navbar-start">
                
                <a class="navbar-item" href="/">Home</a>
                
                <a class="navbar-item" href="/archives">Archives</a>
                
                <a class="navbar-item" href="/categories">Categories</a>
                
                <a class="navbar-item" href="/tags">Tags</a>
                
                <a class="navbar-item" href="/about">About</a>
                
            </div>
            
            <div class="navbar-end">
                
                    
                    
                    <a class="navbar-item" target="_blank" title="Download on GitHub" href="https://github.com/CoderEugene">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                    
                
                
                <a class="navbar-item is-hidden-tablet catalogue" title="Catalogue" href="javascript:;">
                    <i class="fas fa-list-ul"></i>
                </a>
                
                
                <a class="navbar-item search" title="Search" href="javascript:;">
                    <i class="fas fa-search"></i>
                </a>
                
            </div>
        </div>
    </div>
</nav>
    
    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column is-8-tablet is-9-desktop is-9-widescreen has-order-2 column-main"><div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <!-- 增加图标 -->
                <div class="level-item has-text-grey" style="float: left;"> 
                    <i class="fas fa-calendar-alt"></i>&nbsp;&nbsp; <time class="level-item has-text-grey" datetime="2019-12-06T15:17:42.000Z">2019-12-06</time>
                </div>
                
                <div class="level-item">
                <i class="fas fa-folder-open"></i>&nbsp;&nbsp;
                <a class="has-link-grey -link" href="/categories/JVM/">JVM</a>
                </div>
                
                
                <!-- 增加计数和相关图标 -->
                
                    <dev class="level-item has-text-grey"><i class="fa fa-eye"></i>&nbsp;&nbsp;Visitors&nbsp;<span id="busuanzi_value_page_pv"></span></dev>
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal" align="center">
            
                HSDB从入门到实战
            
        </h1>
        <div class="content">
            <p><code>HSDB（Hotspot Debugger)</code>，是一款内置于 SA 中的 GUI 调试工具，可用于调试 JVM 运行时数据，从而进行故障排除</p>
<h2 id="启动HSDB"><a href="#启动HSDB" class="headerlink" title="启动HSDB"></a>启动HSDB</h2><p>检测不同 JDK 版本需要使用不同的 <code>HSDB</code> 版本，否则容易出现无法扫描到对象等莫名其妙的问题</p>
<ul>
<li><p><strong>Mac</strong>：JDK7 和 JDK8 均可以采用以下的方式</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo java -cp ,:/Library/Java/JavaVirtualMachines/jdk1.7.0_80.jdk/Contents/Home/lib/sa-jdi.jar sun.jvm.hotspot.HSDB</span><br></pre></td></tr></table></figure>
<blockquote>
<p>事实上经过测试，即使通过 JDK8 自带的 <code>sa-jdi.jar</code> 去扫描对象（<code>scanoops</code>）的时候也会发生扫不到的情况，但可以通过其他手段代替</p>
</blockquote>
<p>而 JDK11 的启动方式有些区别</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ /Library/Java/JavaVirtualMachines/jdk-11.0.1.jdk/Contents/Home/bin/jhsdb hsdb</span><br></pre></td></tr></table></figure>
<blockquote>
<p>事实上经过测试，该版本启动的 <code>HSDB</code> 会少支持一些指令（比如 <code>mem, whatis</code>），<strong>因此目前不推荐使用该版本</strong></p>
</blockquote>
</li>
<li><p><strong>Windows</strong>: </p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ java -classpath <span class="hljs-string">"%JAVA_HOME%/lib/sa-jdi.jar"</span> sun.jvm.hotspot.HSDB</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>其中启动版本可以使用 <code>/usr/libexec/java_home -V</code> 获取</p>
<blockquote>
<p>若遇到 Unable to locate an executable at “/Users/xx/.jenv/versions/1.7/bin/jhsdb” (-1) 可通过 <code>Jenv</code> 切换到当前 Jdk 版本即可解决</p>
</blockquote>
<a id="more"></a>
<h2 id="JVM参数设置"><a href="#JVM参数设置" class="headerlink" title="JVM参数设置"></a>JVM参数设置</h2><p><code>HSDB</code> 对 <code>Serial GC</code> 支持的较好，因此 Debug 时增加参数 <code>-XX:+UseSerialGC</code>，Debug 工具可以使用 IDE 或 JDB</p>
<h2 id="获取应用进程id"><a href="#获取应用进程id" class="headerlink" title="获取应用进程id"></a>获取应用进程id</h2><p>jps 仅查找当前用户的 Java 进程，而不是当前系统中的所有进程</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ jps</span><br></pre></td></tr></table></figure>
<ul>
<li>默认<strong>显示 pid </strong>以及 <strong>main 方法对应的 class 名称</strong></li>
<li>-v：<strong>输出传递给 JVM 的参数</strong></li>
<li>-l： <strong>输出 main 方法对应的 class 的完整 package 名</strong></li>
</ul>
<h2 id="CLHSDB常用指令"><a href="#CLHSDB常用指令" class="headerlink" title="CLHSDB常用指令"></a>CLHSDB常用指令</h2><ul>
<li><p><code>universe</code>：查看堆空间信息</p>
</li>
<li><p><code>scanoops start end [type]</code>：扫描指定空间中的 type 类型及其子类的实例</p>
<blockquote>
<p>JDK8 版本的 <code>HSDB</code> 的 <code>scanoops</code> 会无法扫描到对象，但可以通过 GUI 界面的 <code>Tools -&gt; Object Histogram</code>，输入想要查询的对象，之后双击来获取对象的地址，也可以继续在里面点击 <code>inspect</code> 来查看对象信息</p>
</blockquote>
</li>
<li><p><code>inspect</code>：查看对象（<code>OOP</code>）信息【使用 <code>tools-&gt;inspect</code>，输入对象地址有更详细的信息哦】</p>
</li>
<li><p><code>revptrs</code>：反向指针，查找引用该对象的指针</p>
</li>
</ul>
<h2 id="HSDB-GUI界面"><a href="#HSDB-GUI界面" class="headerlink" title="HSDB GUI界面"></a>HSDB GUI界面</h2><h3 id="可视化线程栈"><a href="#可视化线程栈" class="headerlink" title="可视化线程栈"></a>可视化线程栈</h3><p><img src="https://zzcoder.oss-cn-hangzhou.aliyuncs.com/jvm/HSDB-01.png" style="zoom: 50%;"></p>
<h3 id="对象直方图"><a href="#对象直方图" class="headerlink" title="对象直方图"></a>对象直方图</h3><p><code>Tools -&gt; Object Histogram</code>，我们可以通过对象直方图快速定位某个类型的对象的地址以供我们进一步分析</p>
<p><img src="https://zzcoder.oss-cn-hangzhou.aliyuncs.com/jvm/HSDB-02.png" style="zoom:50%;"></p>
<p><img src="https://zzcoder.oss-cn-hangzhou.aliyuncs.com/jvm/HSBD-03.png" style="zoom:50%;"></p>
<h3 id="OOP信息"><a href="#OOP信息" class="headerlink" title="OOP信息"></a>OOP信息</h3><p>我们可以根据对象地址在 <code>Tools -&gt; Inspector</code> 获取对象的在 JVM 层的实例 <code>instanceOopDesc</code> 对象，它包括对象头 <code>_mark</code> 和 <code>_metadata</code> 以及实例信息</p>
<p><img src="https://zzcoder.oss-cn-hangzhou.aliyuncs.com/jvm/HSDB-04.png" style="zoom:50%;"></p>
<h3 id="堆信息"><a href="#堆信息" class="headerlink" title="堆信息"></a>堆信息</h3><p>我们可以通过 <code>Tools -&gt; Heap Parameters</code> 获取堆信息，可以结合对象地址判断对象位置</p>
<p><img src="https://zzcoder.oss-cn-hangzhou.aliyuncs.com/jvm/HSDB-05.png" style="zoom:50%;"></p>
<h3 id="加载类列表"><a href="#加载类列表" class="headerlink" title="加载类列表"></a>加载类列表</h3><p>我们可以通过 <code>Tools -&gt; Class Browser</code> 来获取所有加载类列表</p>
<p><img src="https://zzcoder.oss-cn-hangzhou.aliyuncs.com/jvm/HSDB-06.png" style="zoom:50%;"></p>
<h4 id="元数据区"><a href="#元数据区" class="headerlink" title="元数据区"></a>元数据区</h4><p>HotSpot VM 里有一套对象专门用来存放元数据，它们包括： </p>
<ul>
<li><p><code>Klass</code> 系对象，用于描述类型的总体信息【<strong>通过 <code>OOP</code> 信息（<code>inspect</code>）可以看到 <code>instanceKlass</code> 对象</strong>】</p>
</li>
<li><p><code>ConstantPool/ConstantPoolCache</code> 对象：每个 <code>InstanceKlass</code> 关联着一个 <code>ConstantPool</code>，作为该类型的运行时常量池。这个常量池的结构跟 Class 文件里的常量池基本上是对应的</p>
<p><img src="https://zzcoder.oss-cn-hangzhou.aliyuncs.com/jvm/HSDB-07.png" style="zoom:50%;"></p>
<p><img src="https://zzcoder.oss-cn-hangzhou.aliyuncs.com/jvm/HSDB-08.png" style="zoom:50%;"></p>
</li>
<li><p><code>Method</code> 对象，用来描述 Java 方法的总体信息，如方法入口地址、调用/循环计数器等等</p>
<ul>
<li><code>ConstMethod</code> 对象，记录着 Java 方法的不变的描述信息，包括方法名、方法的访问修饰符、<strong>字节码</strong>、行号表、局部变量表等等。<strong>注意，字节码指令被分配在 <code>constMethodOop</code> 对象的内存区域的末尾</strong></li>
<li><code>MethodData</code> 对象，记录着 Java 方法执行时的 profile 信息，例如某方法里的某个字节码之类是否从来没遇到过 null，某个条件跳转是否总是走同一个分支，等等。这些信息在解释器（多层编译模式下也在低层的编译生成的代码里）收集，然后供给 HotSpot Server Compiler 用于做激进优化。</li>
</ul>
<p><img src="https://zzcoder.oss-cn-hangzhou.aliyuncs.com/jvm/HSDB-09.png" style="zoom:50%;"></p>
<p><img src="https://zzcoder.oss-cn-hangzhou.aliyuncs.com/jvm/HSDB-10.png" style="zoom:50%;"></p>
</li>
<li><p><code>Symbol</code> 对象，对应 Class 文件常量池里的 <code>JVM_CONSTANT_Utf8</code> 类型的常量。有一个 VM 全局的 <code>SymbolTable</code> 管理着所有 <code>Symbol</code>。<code>Symbol</code> 由所有 Java 类所共享。</p>
</li>
</ul>
<h4 id="生成class文件"><a href="#生成class文件" class="headerlink" title="生成class文件"></a>生成class文件</h4><p>到对应类下点击 create .class 后就可以在执行 HSDB 的目录下看到生成的 class文件，适合查看动态代理生成的字节码</p>
<h2 id="实战"><a href="#实战" class="headerlink" title="实战"></a>实战</h2><h3 id="分析对象存储区域"><a href="#分析对象存储区域" class="headerlink" title="分析对象存储区域"></a>分析对象存储区域</h3><p>下面代码中的静态变量，成员变量分别存储在什么地方呢？</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Main</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> VMShow StaticVmShow = <span class="hljs-keyword">new</span> VMShow();</span><br><span class="line">    <span class="hljs-keyword">private</span> VMShow objVmShow = <span class="hljs-keyword">new</span> VMShow();</span><br><span class="line"></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;</span><br><span class="line">        fn();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> VMShow <span class="hljs-title">fn</span><span class="hljs-params">()</span></span>&#123;</span><br><span class="line">        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> VMShow();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">VMShow</span> </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> basicInt = <span class="hljs-number">1</span>;</span><br><span class="line">    <span class="hljs-keyword">private</span> Integer objInt = <span class="hljs-number">2</span>;</span><br><span class="line">    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Integer staticInt = <span class="hljs-number">3</span>;</span><br><span class="line">    <span class="hljs-keyword">private</span> String basicString = <span class="hljs-string">"basicString"</span>;</span><br><span class="line">    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String staticString = <span class="hljs-keyword">new</span> String(<span class="hljs-string">"staticString"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>首先查看对象直方图可以找到三个 VMShow 对象</p>
<p><img src="https://zzcoder.oss-cn-hangzhou.aliyuncs.com/jvm/HSDB-11.png" style="zoom:50%;"></p>
<p>那么如何确定这三个地址分别属于哪些变量呢？首先找静态变量，它在 JDK8 中是在 Class 对象中的，因此我们可以找它们的反向指针，如果是<code>java.lang.Class</code> 的那么就是静态变量</p>
<p><img src="https://zzcoder.oss-cn-hangzhou.aliyuncs.com/jvm/HSDB-12.png" style="zoom:50%;"></p>
<p>我们可以从 ObjTest 的 <code>instanceKlass</code> 中的镜像找到 class 对象来验证是否是该对象的 class</p>
<p><img src="https://zzcoder.oss-cn-hangzhou.aliyuncs.com/jvm/HSDB-13.png" style="zoom:50%;"></p>
<p>那么成员变量和局部变量如何区分呢？成员变量会被类实例引用，而局部变量地址则在会被被放在栈区</p>
<p><img src="https://zzcoder.oss-cn-hangzhou.aliyuncs.com/jvm/HSDB-14.png" style="zoom:50%;"></p>
<p>那么局部变量的反向指针都是 null，怎么确定它就被栈区所引用呢？我们可以看可视化线程栈</p>
<p><img src="https://zzcoder.oss-cn-hangzhou.aliyuncs.com/jvm/HSDB-15.png" style="zoom:50%;"></p>
<h3 id="分析字符串字面量存储区域"><a href="#分析字符串字面量存储区域" class="headerlink" title="分析字符串字面量存储区域"></a>分析字符串字面量存储区域</h3><figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">StringTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String s1 = <span class="hljs-string">"a"</span>;</span><br><span class="line">        String s2 = <span class="hljs-string">"b"</span>;</span><br><span class="line">        String s3 = s1 + s2;</span><br><span class="line">        String s4 = <span class="hljs-keyword">new</span> String(<span class="hljs-string">"ab"</span>);</span><br><span class="line">        System.out.println(s4);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面一共涉及的字符串字面量和实例分别存储在什么地方呢？</p>
<ol>
<li><p>首先在 s2 处打上断点，启动 <code>HSDB</code> 监控该进程</p>
</li>
<li><p>打开对象直方图发现只有 1 个 <code>a</code> 的字符串对象</p>
<p><img src="https://zzcoder.oss-cn-hangzhou.aliyuncs.com/jvm/HSDB-16.png" style="zoom:50%;"></p>
</li>
<li><p>查找 StringTable 中 <code>a</code> 的对象地址</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jseval &quot;st = sa.vm.stringTable;st.stringsDo(function (s) &#123; if (sapkg.oops.OopUtilities.stringOopToString(s).matches(&apos;^(a)&apos;)) &#123;print(s + &apos;: &apos;);s.printValueOn(java.lang.System.out); println(&apos;&apos;)&#125;&#125;)&quot;</span><br></pre></td></tr></table></figure>
<p>可以根据需要改变 <code>matches</code> 中的值来匹配</p>
<p><img src="https://zzcoder.oss-cn-hangzhou.aliyuncs.com/jvm/HSDB-17.png" style="zoom:50%;"></p>
<p>可以看到这个对象地址就是 StringTable 中引用的地址</p>
</li>
<li><p>然后打断点在 sout 上，重新开始监控进程</p>
</li>
<li><p>重新使用对象直方图查看 String 值</p>
<p><img src="https://zzcoder.oss-cn-hangzhou.aliyuncs.com/jvm/HSDB-18.png" style="zoom:50%;"></p>
<p>这里有5个值，<code>ab</code> 有3个：</p>
<ul>
<li><code>ab</code> 字面量</li>
<li>其中 s3 相当于 <code>new StringBuild().append(&quot;a&quot;).append(&quot;b&quot;).toString()</code>，会创建一个 <code>ab</code> 的实例</li>
<li>s4会创建一个 <code>ab</code> 的实例</li>
</ul>
</li>
<li><p>我们重新打印 StringTable 相应的值来验证</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jseval &quot;st = sa.vm.stringTable;st.stringsDo(function (s) &#123; if (sapkg.oops.OopUtilities.stringOopToString(s).matches(&apos;^(a|b).?&apos;)) &#123;print(s + &apos;: &apos;);s.printValueOn(java.lang.System.out); println(&apos;&apos;)&#125;&#125;)&quot;</span><br></pre></td></tr></table></figure>
<p><img src="https://zzcoder.oss-cn-hangzhou.aliyuncs.com/jvm/HSDB-19.png" style="zoom:50%;"></p>
</li>
</ol>
<p>那么运行时常量池中存放的是哪些呢？实际上它和 StringTable 一样是这些对象的引用，只不过 StringTable 是全局共享的，而运行时常量池只有该类的一些字面量。我们通过加载类列表可以查看</p>
<p><img src="https://zzcoder.oss-cn-hangzhou.aliyuncs.com/jvm/HSDB-20.png" alt="image-20190806204906357" style="zoom:50%;"></p>
<h3 id="分析String-intern"><a href="#分析String-intern" class="headerlink" title="分析String.intern"></a>分析String.intern</h3><figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">StringInternTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String s1 = <span class="hljs-keyword">new</span> String(<span class="hljs-string">"he"</span>) + <span class="hljs-keyword">new</span> String(<span class="hljs-string">"llo"</span>); <span class="hljs-comment">//  1</span></span><br><span class="line">        s1.intern(); <span class="hljs-comment">// 2</span></span><br><span class="line">        String s2=<span class="hljs-string">"hello"</span>; <span class="hljs-comment">// 3</span></span><br><span class="line">        System.out.println(s1==s2); <span class="hljs-comment">// true</span></span><br><span class="line"></span><br><span class="line">        String s3 = <span class="hljs-keyword">new</span> String(<span class="hljs-string">"1"</span>) + <span class="hljs-keyword">new</span> String(<span class="hljs-string">"2"</span>); <span class="hljs-comment">// 4</span></span><br><span class="line">        String s4 = <span class="hljs-string">"12"</span>; <span class="hljs-comment">// 5</span></span><br><span class="line">        s3.intern(); <span class="hljs-comment">// 6</span></span><br><span class="line">        System.out.println(s3 == s4);  <span class="hljs-comment">// false</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上述在编译器确定的字面量有 <code>he</code>, <code>llo</code>, <code>hello</code>, <code>1</code>,  <code>2</code>, <code>12</code>，但在真正执行到语句前，符号引用不一定解析成直接引用，即字面量对应的对象会在执行到语句时（<code>idc</code> 指令）才会创建</p>
<p>首先看通过加载类列表查看字节码指令： </p>
<table>
<thead>
<tr>
<th>line</th>
<th>bci</th>
<th>bytecode</th>
</tr>
</thead>
<tbody>
<tr>
<td>7</td>
<td>0</td>
<td>new #2 [Class java.lang.StringBuilder]</td>
</tr>
<tr>
<td>7</td>
<td>3</td>
<td>dup</td>
</tr>
<tr>
<td>7</td>
<td>4</td>
<td>invokespecial #3 [Method void <init>()]</init></td>
</tr>
<tr>
<td>7</td>
<td>7</td>
<td>new #4 [Class java.lang.String]</td>
</tr>
<tr>
<td>7</td>
<td>10</td>
<td>dup</td>
</tr>
<tr>
<td>7</td>
<td>11</td>
<td>ldc #5(0) <string "he"=""> [fast_aldc]</string></td>
</tr>
<tr>
<td>7</td>
<td>13</td>
<td>invokespecial #6 [Method void <init>(java.lang.String)]</init></td>
</tr>
<tr>
<td>7</td>
<td>16</td>
<td>invokevirtual #7 [Method java.lang.StringBuilder            append(java.lang.String)]</td>
</tr>
<tr>
<td>7</td>
<td>19</td>
<td>new #4 [Class java.lang.String]</td>
</tr>
<tr>
<td>7</td>
<td>22</td>
<td>dup</td>
</tr>
<tr>
<td>7</td>
<td>23</td>
<td>ldc #8(1) <string "llo"=""> [fast_aldc]</string></td>
</tr>
<tr>
<td>7</td>
<td>25</td>
<td>invokespecial #6 [Method void <init>(java.lang.String)]</init></td>
</tr>
<tr>
<td>7</td>
<td>28</td>
<td>invokevirtual #7 [Method java.lang.StringBuilder            append(java.lang.String)]</td>
</tr>
<tr>
<td>7</td>
<td>31</td>
<td>invokevirtual #9 [Method java.lang.String toString()]</td>
</tr>
<tr>
<td>7</td>
<td>34</td>
<td>astore_1</td>
</tr>
<tr>
<td>8</td>
<td>35</td>
<td>aload_1</td>
</tr>
<tr>
<td>8</td>
<td>36</td>
<td>invokevirtual #10 [Method java.lang.String intern()]</td>
</tr>
<tr>
<td>8</td>
<td>39</td>
<td>pop</td>
</tr>
<tr>
<td>9</td>
<td>40</td>
<td>ldc #11(2) <string "hello"=""> [fast_aldc]</string></td>
</tr>
<tr>
<td>9</td>
<td>42</td>
<td>astore_2</td>
</tr>
<tr>
<td>10</td>
<td>43</td>
<td>getstatic #12 [Field java.io.PrintStream out]</td>
</tr>
<tr>
<td>10</td>
<td>46</td>
<td>aload_1</td>
</tr>
<tr>
<td>10</td>
<td>47</td>
<td>aload_2</td>
</tr>
<tr>
<td>10</td>
<td>48</td>
<td>if_acmpne 55</td>
</tr>
<tr>
<td>10</td>
<td>51</td>
<td>iconst_1</td>
</tr>
<tr>
<td>10</td>
<td>52</td>
<td>goto 56</td>
</tr>
<tr>
<td>10</td>
<td>55</td>
<td>iconst_0</td>
</tr>
<tr>
<td>10</td>
<td>56</td>
<td>invokevirtual #13 [Method void println(boolean)]</td>
</tr>
<tr>
<td>12</td>
<td>59</td>
<td>new #2 [Class java.lang.StringBuilder]</td>
</tr>
<tr>
<td>12</td>
<td>62</td>
<td>dup</td>
</tr>
<tr>
<td>12</td>
<td>63</td>
<td>invokespecial #3 [Method void <init>()]</init></td>
</tr>
<tr>
<td>12</td>
<td>66</td>
<td>new #4 [Class java.lang.String]</td>
</tr>
<tr>
<td>12</td>
<td>69</td>
<td>dup</td>
</tr>
<tr>
<td>12</td>
<td>70</td>
<td>ldc #14(3) <string "1"=""> [fast_aldc]</string></td>
</tr>
<tr>
<td>12</td>
<td>72</td>
<td>invokespecial #6 [Method void <init>(java.lang.String)]</init></td>
</tr>
<tr>
<td>12</td>
<td>75</td>
<td>invokevirtual #7 [Method java.lang.StringBuilder            append(java.lang.String)]</td>
</tr>
<tr>
<td>12</td>
<td>78</td>
<td>new #4 [Class java.lang.String]</td>
</tr>
<tr>
<td>12</td>
<td>81</td>
<td>dup</td>
</tr>
<tr>
<td>12</td>
<td>82</td>
<td>ldc #15(4) <string "2"=""> [fast_aldc]</string></td>
</tr>
<tr>
<td>12</td>
<td>84</td>
<td>invokespecial #6 [Method void <init>(java.lang.String)]</init></td>
</tr>
<tr>
<td>12</td>
<td>87</td>
<td>invokevirtual #7 [Method java.lang.StringBuilder            append(java.lang.String)]</td>
</tr>
<tr>
<td>12</td>
<td>90</td>
<td>invokevirtual #9 [Method java.lang.String toString()]</td>
</tr>
<tr>
<td>12</td>
<td>93</td>
<td>astore_3</td>
</tr>
<tr>
<td>13</td>
<td>94</td>
<td>ldc #16(5) <string "12"=""> [fast_aldc]</string></td>
</tr>
<tr>
<td>13</td>
<td>96</td>
<td>astore #4</td>
</tr>
<tr>
<td>14</td>
<td>98</td>
<td>aload_3</td>
</tr>
<tr>
<td>14</td>
<td>99</td>
<td>invokevirtual #10 [Method java.lang.String intern()]</td>
</tr>
<tr>
<td>14</td>
<td>102</td>
<td>pop</td>
</tr>
<tr>
<td>15</td>
<td>103</td>
<td>getstatic #12 [Field java.io.PrintStream out]</td>
</tr>
<tr>
<td>15</td>
<td>106</td>
<td>aload_3</td>
</tr>
<tr>
<td>15</td>
<td>107</td>
<td>aload #4</td>
</tr>
<tr>
<td>15</td>
<td>109</td>
<td>if_acmpne 116</td>
</tr>
<tr>
<td>15</td>
<td>112</td>
<td>iconst_1</td>
</tr>
<tr>
<td>15</td>
<td>113</td>
<td>goto 117</td>
</tr>
<tr>
<td>15</td>
<td>116</td>
<td>iconst_0</td>
</tr>
<tr>
<td>15</td>
<td>117</td>
<td>invokevirtual #13 [Method void println(boolean)]</td>
</tr>
<tr>
<td>16</td>
<td>120</td>
<td>return</td>
</tr>
</tbody>
</table>
<p>可以看到确实有 6 个<code>idc</code>，但如果我们在第一行语句打上断点，会发现它们都不在 StringTable（但这里的 <code>he</code> 在，它可能被其他类用到了），然后执行第一行，会发现 <code>he</code> 和 <code>llo</code> 在了，但 <code>hello</code> 不在</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jseval &quot;st = sa.vm.stringTable;st.stringsDo(function (s) &#123; if (sapkg.oops.OopUtilities.stringOopToString(s).matches(&apos;^(he|llo|hello|1|2|12)&apos;)) &#123;print(s + &apos;: &apos;);s.printValueOn(java.lang.System.out); println(&apos;&apos;)&#125;&#125;)&quot;</span><br></pre></td></tr></table></figure>
<p><img src="https://zzcoder.oss-cn-hangzhou.aliyuncs.com/jvm/HSDB-21.png" style="zoom:50%;"></p>
<p>但是 <code>hello</code> 对象还是存在的（new）</p>
<p><img src="https://zzcoder.oss-cn-hangzhou.aliyuncs.com/jvm/HSDB-22.png" style="zoom:50%;"></p>
<p>接着执行 s1.intern 会将 <code>hello</code> 对象的地址放入 StringTable</p>
<p><img src="https://zzcoder.oss-cn-hangzhou.aliyuncs.com/jvm/HSDB-23.png" style="zoom:50%;"></p>
<p>再执行 <code>String s2=&quot;hello&quot;;</code> 会发现 <code>hello</code> 对象仍然只有一个，都指向同一个。</p>
<p>而继续在 6 打断点，即执行完 <code>String s4 = &quot;12&quot;;</code>，因为 <code>12</code> 不在字符串常量池，那么会新建一个 <code>12</code> 的实例，并让字符串常量池引用它，这样会发现就有两个 <code>12</code> 了</p>
<p><img src="https://zzcoder.oss-cn-hangzhou.aliyuncs.com/jvm/HSDB-24.png" style="zoom:50%;"></p>

        </div>
        
        <div class="level is-size-7 is-uppercase">
            <div class="level-start">
                <div class="level-item">
                    <span class="is-size-6 has-text-grey has-mr-7">#</span>
                    <a class="has-link-grey -link" href="/tags/JVM/">JVM</a>, <a class="has-link-grey -link" href="/tags/故障排查/">故障排查</a>
                </div>
            </div>
        </div>
        
        
        
    </div>
</div>





<div class="card card-transparent">
    <div class="level post-navigation is-flex-wrap is-mobile">
        
        <div class="level-start">
            <a class="level level-item has-link-grey  article-nav-prev" href="/2020/02/05/如何优雅的避免空指针/">
                <i class="level-item fas fa-chevron-left"></i>
                <span class="level-item">如何优雅的避免空指针</span>
            </a>
        </div>
        
        
        <div class="level-end">
            <a class="level level-item has-link-grey  article-nav-next" href="/2019/12/06/Static-Nested-Or-Inner-Classes/">
                <span class="level-item">Static Nested Or Inner Classes</span>
                <i class="level-item fas fa-chevron-right"></i>
            </a>
        </div>
        
    </div>
</div>



<div class="card">
    <div class="card-content">
        <h3 class="title is-5 has-text-weight-normal">Commentaires</h3>
        
<div id="comment-container"></div>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.4.1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1.4.1/dist/gitalk.min.js"></script>
<script>
    var gitalk = new Gitalk({
        clientID: 'a6ee64392ee1dba6a516',
        clientSecret: '7638214b6ca106a17ff2301358bd4297d6e47773',
        id: '3e6de0103eb45087e47188c5e6a9d8f6',
        repo: 'CoderEugene.github.io',
        owner: 'CoderEugene',
        admin: ["CoderEugene"]
    })
    gitalk.render('comment-container')
</script>

    </div>
</div>
</div>
                




<div class="column is-4-tablet is-3-desktop is-3-widescreen  has-order-1 column-left ">
    
        
<div class="card widget">
    <div class="card-content">
        <nav class="level">
            <div class="level-item has-text-centered">
                <div>
                    <img class="image is-128x128 has-mb-6" src="/images/avatar.JPG" alt="Mr·Zh">
                    
                    <p class="is-size-4 is-block">
                        Mr·Zh
                    </p>
                    
                    
                    
                    <p class="is-size-6 is-flex is-flex-center has-text-grey">
                        <i class="fas fa-map-marker-alt has-mr-7"></i>
                        <span>Hangzhou, China</span>
                    </p>
                    
                </div>
            </div>
        </nav>
        <nav class="level is-mobile">
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Articles
                    </p>
                    <p class="title has-text-weight-normal">
                        13
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Catégories
                    </p>
                    <p class="title has-text-weight-normal">
                        5
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Tags
                    </p>
                    <p class="title has-text-weight-normal">
                        18
                    </p>
                </div>
            </div>
        </nav>
        <div class="level">
            <a class="level-item button is-link is-rounded" href="https://github.com/CoderEugene">
                SUIVRE</a>
        </div>
        
        
        <div class="level is-mobile">
            
            <a class="level-item button is-white is-marginless" target="_blank" title="Github" href="https://github.com/CoderEugene">
                
                <i class="fab fa-github"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank" title="Youtube" href="https://www.youtube.com/channel/UCw0q8SAGateu9wq6ERunCNw?view_as=subscriber">
                
                <i class="fab fa-youtube"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank" title="RSS" href="/atom.xml">
                
                <i class="fas fa-rss"></i>
                
            </a>
            
        </div>
        
    </div>
</div>
    
        
<div class="card widget" id="toc">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                Catalogue
            </h3>
            <ul class="menu-list"><li>
        <a class="is-flex" href="#启动HSDB">
        <span class="has-mr-6">1</span>
        <span>启动HSDB</span>
        </a></li><li>
        <a class="is-flex" href="#JVM参数设置">
        <span class="has-mr-6">2</span>
        <span>JVM参数设置</span>
        </a></li><li>
        <a class="is-flex" href="#获取应用进程id">
        <span class="has-mr-6">3</span>
        <span>获取应用进程id</span>
        </a></li><li>
        <a class="is-flex" href="#CLHSDB常用指令">
        <span class="has-mr-6">4</span>
        <span>CLHSDB常用指令</span>
        </a></li><li>
        <a class="is-flex" href="#HSDB-GUI界面">
        <span class="has-mr-6">5</span>
        <span>HSDB GUI界面</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#可视化线程栈">
        <span class="has-mr-6">5.1</span>
        <span>可视化线程栈</span>
        </a></li><li>
        <a class="is-flex" href="#对象直方图">
        <span class="has-mr-6">5.2</span>
        <span>对象直方图</span>
        </a></li><li>
        <a class="is-flex" href="#OOP信息">
        <span class="has-mr-6">5.3</span>
        <span>OOP信息</span>
        </a></li><li>
        <a class="is-flex" href="#堆信息">
        <span class="has-mr-6">5.4</span>
        <span>堆信息</span>
        </a></li><li>
        <a class="is-flex" href="#加载类列表">
        <span class="has-mr-6">5.5</span>
        <span>加载类列表</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#元数据区">
        <span class="has-mr-6">5.5.1</span>
        <span>元数据区</span>
        </a></li><li>
        <a class="is-flex" href="#生成class文件">
        <span class="has-mr-6">5.5.2</span>
        <span>生成class文件</span>
        </a></li></ul></li></ul></li><li>
        <a class="is-flex" href="#实战">
        <span class="has-mr-6">6</span>
        <span>实战</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#分析对象存储区域">
        <span class="has-mr-6">6.1</span>
        <span>分析对象存储区域</span>
        </a></li><li>
        <a class="is-flex" href="#分析字符串字面量存储区域">
        <span class="has-mr-6">6.2</span>
        <span>分析字符串字面量存储区域</span>
        </a></li><li>
        <a class="is-flex" href="#分析String-intern">
        <span class="has-mr-6">6.3</span>
        <span>分析String.intern</span>
        </a></li></ul></li></ul>
        </div>
    </div>
</div>

    
        
<div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                Catégories
            </h3>
            <ul class="menu-list">
            <li>
        <a class="level is-marginless" href="/categories/JUC/">
            <span class="level-start">
                <span class="level-item">JUC</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">4</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/JVM/">
            <span class="level-start">
                <span class="level-item">JVM</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Java基础/">
            <span class="level-start">
                <span class="level-item">Java基础</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">4</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Mysql/">
            <span class="level-start">
                <span class="level-item">Mysql</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/计算机通信/">
            <span class="level-start">
                <span class="level-item">计算机通信</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">3</span>
            </span>
        </a></li>
            </ul>
        </div>
    </div>
</div>
    
        
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Nuage de tags
        </h3>
        <a href="/tags/DNS/" style="font-size: 10px;">DNS</a> <a href="/tags/HTTP/" style="font-size: 10px;">HTTP</a> <a href="/tags/IO/" style="font-size: 10px;">IO</a> <a href="/tags/JVM/" style="font-size: 12.5px;">JVM</a> <a href="/tags/Java/" style="font-size: 20px;">Java</a> <a href="/tags/Mysql/" style="font-size: 10px;">Mysql</a> <a href="/tags/Netty/" style="font-size: 10px;">Netty</a> <a href="/tags/Reactor/" style="font-size: 10px;">Reactor</a> <a href="/tags/UDP/" style="font-size: 10px;">UDP</a> <a href="/tags/volatile/" style="font-size: 10px;">volatile</a> <a href="/tags/内存屏障/" style="font-size: 10px;">内存屏障</a> <a href="/tags/可见性/" style="font-size: 10px;">可见性</a> <a href="/tags/多线程/" style="font-size: 15px;">多线程</a> <a href="/tags/操作系统/" style="font-size: 10px;">操作系统</a> <a href="/tags/故障排查/" style="font-size: 10px;">故障排查</a> <a href="/tags/最佳实践/" style="font-size: 15px;">最佳实践</a> <a href="/tags/泛型/" style="font-size: 10px;">泛型</a> <a href="/tags/锁/" style="font-size: 17.5px;">锁</a>
    </div>
</div>

    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Archives
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2020/08/">
                <span class="level-start">
                    <span class="level-item">August 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/07/">
                <span class="level-start">
                    <span class="level-item">July 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/05/">
                <span class="level-start">
                    <span class="level-item">May 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/02/">
                <span class="level-start">
                    <span class="level-item">February 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/12/">
                <span class="level-start">
                    <span class="level-item">December 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/06/">
                <span class="level-start">
                    <span class="level-item">June 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/02/">
                <span class="level-start">
                    <span class="level-item">February 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/01/">
                <span class="level-start">
                    <span class="level-item">January 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/12/">
                <span class="level-start">
                    <span class="level-item">December 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
    
    
        <div class="column-right-shadow is-hidden-widescreen ">
        
        </div>
    
</div>

                
            </div>
        </div>
    </section>
    <footer class="footer">
    <div class="container">
        <div class="level">
            <div class="level-start has-text-centered-mobile">
                <a class="footer-logo is-block has-mb-6" href="/">
                
                    <img src="/images/logo.png" alt="HSDB从入门到实战" height="28">
                
                </a>
                <p class="is-size-7">
                &copy; 2020 Mr·Zh&nbsp;
                <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
				&nbsp;<i class="far fa-eye"></i>&nbsp;PV&nbsp;&nbsp;<span id="busuanzi_value_site_pv"></span>&nbsp;&nbsp;&nbsp;<i class="fa fa-user-md"></i>&nbsp;UV&nbsp;&nbsp;<span id="busuanzi_value_site_uv"></span>
                </p>
            </div>
            <div class="level-end">
            
                <div class="field has-addons is-flex-center-mobile has-mt-5-mobile is-flex-wrap is-flex-middle">
                
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Creative Commons" href="https://creativecommons.org/">
                        
                        <i class="fab fa-creative-commons"></i>
                        
                    </a>
                </p>
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/">
                        
                        <i class="fab fa-creative-commons-by"></i>
                        
                    </a>
                </p>
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Download on GitHub" href="https://github.com/CoderEugene">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                </p>
                
                </div>
            
            </div>
        </div>
    </div>
</footer>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script>
<script>moment.locale("en");</script>


    
    
    
    <script src="/js/animation.js"></script>
    

    
    
    
    <script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script>
    <script src="/js/gallery.js" defer></script>
    

    
    

<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update
            my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        });
    });
</script>


    
    
<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    MathJax.Hub.Config({
        'HTML-CSS': {matchFontHeight: false},
        SVG: {matchFontHeight: false},
        CommonHTML: {matchFontHeight: false}
    });
});
</script>

    
    

<a id="back-to-top" title="Back to Top" href="javascript:;">
    <i class="fas fa-chevron-up"></i>
</a>
<script src="/js/back-to-top.js" defer></script>


    
    

    
    
    
    

    
    
    
    
    
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script>
    <script src="/js/clipboard.js" defer></script>
    

    


<script src="/js/main.js" defer></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="Type something...">
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: 'Articles',
                PAGES: 'Pages',
                CATEGORIES: 'Catégories',
                TAGS: 'Tags',
                UNTITLED: '(Untitled)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js" defer></script>
<link rel="stylesheet" href="/css/search.css">
<link rel="stylesheet" href="/css/insight.css">
    
</body>
</html>